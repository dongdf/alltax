webpackJsonp([13],{ANns:function(t,s,e){t.exports=e.p+"static/img/ok.40dab97.png"},MD74:function(t,s,e){"use strict";var i=e("Rije"),n={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"csup"},[i("ul",[i("li",{directives:[{name:"show",rawName:"v-show",value:t.tempImgs.length<t.max,expression:"tempImgs.length<max"}],on:{click:t.chooseImg}},[t._m(0)]),t._v(" "),t._l(t.tempImgs,function(s){return i("li",[i("div",{staticClass:"pics"},[i("img",{attrs:{src:s.url}})]),t._v(" "),i("i",{staticClass:"del",on:{click:function(e){t.delimg(s)}}},[i("img",{attrs:{src:e("JNLr")}})])])}),t._v(" "),i("div",{staticClass:"cl"})],2)])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"pics addpic"},[s("img",{attrs:{src:e("xuvL")}})])}]};var a=function(t){e("xsts")},c=e("VU/8")(i.a,n,!1,a,"data-v-4f3a18de",null);s.a=c.exports},Rije:function(t,s,e){"use strict";(function(t){var i=e("//Fk"),n=e.n(i),a=e("mtWM"),c=e.n(a);s.a={name:"csupload",props:["max"],data:function(){return{filePath:null,targetFile:null,imgurl:"",tempImgs:[],previewImg:{data:""}}},methods:{chooseImg:function(){var t=this;wx.ready(function(){wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(s){s.localIds;t.uploadWximg(s.localIds).then(function(s){return t.getwxImg(s)}).then(function(s){t.tempImgs.push({url:s.data})})}})})},uploadWximg:function(t){return new n.a(function(s,e){wx.ready(function(){wx.uploadImage({localId:t.toString(),isShowProgressTips:1,success:function(t){t.serverId;s(t.serverId)}})})})},getwxImg:function(t){var s=this;return new n.a(function(e,i){s.$http.get("authentication/weChat/uploadMediaToOSS?mediaId="+t).then(function(t){e(t.data)})})},delimg:function(t){var s=this.tempImgs.findIndex(function(s){return t.url==s.url});this.tempImgs.splice(s,s+1)},handleFileChange:function(s){var e=this.$refs.inputer;if(this.targetFile=e,this.file=e.files[0],this.errText="",Math.floor(this.file.size/1024)>2048)return t.toast("上传文件不要超过2M"),!1;this.$emit("input",this.file),this.fileName=this.file.name,this.upload(this.file)},upload:function(){var t=this,s=this;new n.a(function(t,e){s.$http.get("authentication/weChat/ossSignature").then(function(s){t(s.data)})}).then(function(t){return e=t,new n.a(function(t,i){var n=s.targetFile.files[0],a=n.name.split(".").length,o=(new Date).getTime()+"."+n.name.split(".")[a-1],r=new FormData;r.append("chunk","0"),r.append("OSSAccessKeyId",e.data.accessid),r.append("policy",e.data.policy),r.append("Signature",e.data.signature),r.append("Expires",e.data.expire),r.append("key",e.data.dir+o),r.append("success_action_status","200"),r.append("Access-Control-Allow-Origin","*"),r.append("file",n,n.name),console.log(r.get("file"));var u={headers:{"Content-Type":"multipart/form-data"}};console.log(u),s.$indicator.open({text:"上传中",spinnerType:"fading-circle"}),s.imgurl=e.data.host,c.a.post(e.data.host,r,u).then(function(i){if(200==i.status){var a={key:e.data.dir+o,name:n.name};s.$indicator.close(),s.$refs.inputer.value="",t(a)}})});var e}).then(function(s){console.log(t.imgurl+"/"+s.key);var e=t.imgurl+"/"+s.key;t.tempImgs.push({url:e})})}}}}).call(s,e("7t+N"))},YhwD:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("bOdI"),n=e.n(i),a=e("Wkgs"),c=(e("Q0Ca"),e("MD74")),o={data:function(){var t;return t={show:!1,success:!1,placeholder:"请输入提问内容（0/500）",qtype1:[],mineInfo:{},qtype2:[],select1:{id:""},select2:{id:""},askcontent:""},n()(t,"success",!1),n()(t,"showtypes","请选择分类"),n()(t,"submitting",!0),t},mounted:function(){this.getType1(),this.getType2(),this.checkUser()},components:{reply:a.a,csupload:c.a},methods:{checkUser:function(){var t=this;this.$http.get("user/userService/getUserWeChatVo").then(function(s){if(t.mineInfo=s.data.data,!t.mineInfo.mobile)return t.$messagebox.confirm("为了更好的解决您的问题，请先完善用户信息","提示").then(function(s){t.$router.push("/login")}),!1})},subques:function(){var t=this;if(!this.mineInfo.mobile)return this.$messagebox.confirm("为了更好的解决您的问题，请先完善用户信息","提示").then(function(s){t.$router.push("/login")}),!1;if(!this.askcontent.trim())return this.$toast("请输入提问内容"),!1;if(this.askcontent=this.askcontent.replace(/\r\n/g,"<br/>"),this.askcontent=this.askcontent.replace(/\n/g,"<br/>"),this.askcontent=this.askcontent.replace(/\s/g," "),!this.submitting)return!1;this.submitting=!1;var s="";if(this.$refs.csupload.tempImgs.length>0&&this.$refs.csupload.tempImgs[0].url)s=this.$refs.csupload.tempImgs[0].url;this.$http.post("ask/askService/createAsk",{subData:{question_classfy_id:this.select2.id,classfy_id:this.select1.id,question_content:this.askcontent,question_pic:s}}).then(function(s){1==s.data.code?t.success=!0:t.$toast(s.data.msg),t.submitting=!0})},successbtn:function(){this.success=!1,this.$router.push({path:"/question"})},ck2:function(t){this.select2=t},ck1:function(t){this.select1=t},getType1:function(){var t=this;this.$http.get("ask/askService/getQuestionTrade").then(function(s){t.qtype1=s.data.data})},getType2:function(){var t=this;this.$http.get("ask/askService/getQuestionClassfy").then(function(s){t.qtype2=s.data.data})},showList:function(){this.show=!this.show},showList2:function(){if(this.show=!1,!this.select2.classfy_name||!this.select1.classfyName)return!1;this.showtypes=this.select2.classfy_name+">"+this.select1.classfyName},showToast:function(){this.success=!0},goToCourse:function(){this.$router.push({path:"course",query:this.$route.query})},gotoDetail:function(){this.$router.push({path:"home",query:this.$route.query})}}},r={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"ask"},[i("ul",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"custom-la"},[i("li",[i("dl",{staticClass:"clear"},[i("dt",[t._v("类型:")]),t._v(" "),t._l(t.qtype2,function(s){return i("dd",{class:t.select2.id==s.id?"selectbq":"",on:{click:function(e){t.ck2(s)}}},[t._v(t._s(s.classfyName))])})],2),t._v(" "),i("dl",{staticClass:"clear"},[i("dt",[t._v("行业:")]),t._v(" "),t._l(t.qtype1,function(s){return i("dd",{class:t.select1.id==s.id?"selectbq":"",on:{click:function(e){t.ck1(s)}}},[t._v(t._s(s.classfyName))])})],2)]),t._v(" "),i("li",[i("p",[i("span",{staticClass:"btn",on:{click:t.showList2}},[t._v("确定")])])])]),t._v(" "),i("div",{staticClass:"pics"},[i("div",{staticClass:"tx"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.askcontent,expression:"askcontent"}],attrs:{name:"",id:"tl",placeholder:"请输入提问内容"},domProps:{value:t.askcontent},on:{input:function(s){s.target.composing||(t.askcontent=s.target.value)}}}),t._v(" "),i("br"),t._v(" "),i("csupload",{ref:"csupload",attrs:{max:1}}),t._v(" "),i("span",{staticClass:"btn",on:{click:t.subques}},[t._v("确定")])],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.success,expression:"success"}],staticClass:"success"},[i("div",{staticClass:"smBox"},[i("img",{attrs:{src:e("ANns"),alt:""}}),t._v(" "),i("h5",[t._v("提交成功")]),t._v(" "),i("p",[t._v("提交成功，请耐心等待回答")]),t._v(" "),i("div",{staticClass:"lightBtn",on:{click:t.successbtn}},[t._v("\n                我知道了\n            ")])])])])},staticRenderFns:[]};var u=e("VU/8")(o,r,!1,function(t){e("odt6")},"data-v-0e189ebc",null);s.default=u.exports},odt6:function(t,s){},xsts:function(t,s){},xuvL:function(t,s,e){t.exports=e.p+"static/img/addpic.fe2fe47.png"}});