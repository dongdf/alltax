webpackJsonp([22],{"+qqF":function(t,e,s){t.exports=s.p+"static/img/wallet.fda4446.png"},"/L72":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("//Fk"),i=s.n(n),a={data:function(){return{paySelect:{},pptype:0,money_czm:"",showchous:!1,walletInfo:{},mineInfo:{},active:1,psize:15,pnumb:1,mxlist:[],loadshow:!0,cardinfo:{},showKnowlegCard:!1,lqList:[]}},components:{noresult:s("oPJ/").a},mounted:function(){this.$route.query.idx&&(this.active=this.$route.query.idx),this.getmineInfo(),this.getmx(),this.getcards(),this.getlqList()},methods:{paylist:function(){},money_cz:function(){var t=this;this.$http.post("pay/payService/secret/payOrder?secret="+this.money_czm+"&optType=2",{secret:this.money_czm,optType:2}).then(function(e){1==e.data.code?(t.money_czm="",t.$toast("充值成功")):t.$messagebox("提示",e.data.msg)},function(e){t.$messagebox("提示","服务异常请重试!")})},getlqList:function(){var t=this;this.$http.get("activity/rechargePackageService/packageList").then(function(e){t.lqList=e.data.data})},createNeworder:function(t){var e=this;return new i.a(function(s,n){e.$http.post("order/orderService/newOrder",{subData:{order_type:13,order_resource_id:t.id,amount:""}}).then(function(t){s(t)},function(t){n("创建订单失败")})})},buylingq:function(t){var e=this;this.$indicator.open(),this.createNeworder(t).then(function(t){e.wxpaylq(t)},function(t){e.$toast(t),setTimeout(function(){e.$indicator.close()},2e3)})},wxpaylq:function(t){var e=this,s=this;this.$http.post("pay/payService/wx/payOrder?orderId="+t.data.data,{subData:{orderId:t.data.data,couponId:"",presentedFlag:""}}).then(function(t){s.$indicator.close();var n=t.data.data;function i(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:n.appId,timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.wxPackage,signType:n.signType,paySign:n.paySign},function(t){s.getmineInfo(),s.getmx(),s.getcards(),"get_brand_wcpay_request:ok"==t.err_msg||("get_brand_wcpay_request:cancel"==t.err_msg?location.reload():(t.err_msg,location.reload()))})}setTimeout(function(){e.paying=!0},800),"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",i,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",i),document.attachEvent("onWeixinJSBridgeReady",i)):i()},function(t){s.$indicator.close()})},changetb:function(t){2==t&&this.$router.push({path:"/newcard"})},getcards:function(){var t=this;this.$http.get("order/orderService/getMyKnowledgeCrdOrder").then(function(e){0==e.data.data.length?(t.showKnowlegCard=!1,t.cardinfo={}):(t.showKnowlegCard=!0,t.cardinfo=e.data.data[0])})},gohbao:function(){this.$router.push({path:"/shai",query:{purl:"https://chs-picture.oss-cn-beijing.aliyuncs.com/chs-hb/money.jpg",type:1}})},tixian:function(){var t=this;this.$http.post("user/userAccountService/presented/withdrawal",{subData:{amount:this.mineInfo.canBePresented}}).then(function(e){1==e.data.code?(t.$toast("提现成功"),t.getmineInfo(),t.mxlist=[],t.pnumb=1,t.getmx()):t.$toast(e.data.msg)})},getmineInfo:function(){var t=this;this.$http.get("user/userService/getUserWeChatVo").then(function(e){t.mineInfo=e.data.data})},loadMoreitem:function(){this.pnumb++,this.getmx()},getmx:function(){var t=this;this.$http.post("user/userAccountService/findMyPresentedList",{subData:{pageNum:this.pnumb,pageSize:this.psize}}).then(function(e){if(0==e.data.data.list.length){if(t.loadshow=!1,1==t.pnumb)return!1;t.$toast("没有了")}else if(t.loadshow=!0,t.mxlist.length>0){var s=e.data.data.list;for(var n in s)t.mxlist.push(s[n])}else t.mxlist=e.data.data.list})}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"myWallet"},[n("ul",{staticClass:"tabss",staticStyle:{"z-index":"99"}},[n("li",{class:1==t.active?"cur":"",on:{click:function(e){t.changetb(1)}}},[t._v("零钱"),n("p",{staticClass:"line"})]),t._v(" "),n("li",{class:2==t.active?"cur":"",on:{click:function(e){t.changetb(2)}}},[t._v("卡包"),n("p",{staticClass:"line"})]),t._v(" "),n("div",{staticClass:"cl"})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1==t.active,expression:"active == 1"}]},[n("div",{staticClass:"scoreTop"},[n("div",{staticClass:"shaiuishai",on:{click:function(e){t.gohbao()}}},[n("i",{staticClass:"lin"}),t._m(0),t._v("晒一晒")]),t._v(" "),n("img",{attrs:{src:s("+qqF"),alt:""}}),t._v(" "),n("h3",{staticStyle:{"font-size":"40px","font-weight":"normal"}},[t._v(t._s(t.mineInfo.totalAmount))]),t._v(" "),n("p",[t._v("我的零钱(元)")]),t._v(" "),t._m(1),t._v(" "),n("ul",{staticClass:"money_detail"},[n("li",[n("h5",[t._v(t._s(t.mineInfo.canBePresented))]),t._v(" "),n("div",{staticClass:"moneyDetail_desc"},[t._v("提现余额(元)")])]),t._v(" "),n("li",{staticClass:"last"},[n("h5",[t._v(t._s(t.mineInfo.freezingAmount))]),t._v(" "),n("div",{staticClass:"moneyDetail_desc"},[t._v("充值余额(元)")])])]),t._v(" "),n("div",{staticClass:"cl"}),t._v(" "),n("div",{staticClass:"optmoney"},[n("ul",[n("li",{on:{click:function(e){t.tixian()}}},[n("div",{staticClass:"nbtns"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.mineInfo.canBePresented>=100,expression:"mineInfo.canBePresented>=100"}]},[t._v("\n                  全部提现\n              ")]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.mineInfo.canBePresented<100,expression:"mineInfo.canBePresented<100"}]},[t._v("\n                  全部提现\n              ")])])]),t._v(" "),n("li",{on:{click:function(e){t.showchous=!0}}},[t._m(2)]),t._v(" "),n("div",{staticClass:"cl"})])])]),t._v(" "),n("h4",{staticClass:"title",staticStyle:{color:"#C9A063","text-align":"center"}},[t._v("\n        零钱明细\n    ")]),t._v(" "),n("ul",{staticClass:"movements"},t._l(t.mxlist,function(e){return n("li",[n("div",[n("h4",[t._v(t._s(e.typeMsg))]),t._v(" "),n("p",[t._v(t._s(t._f("timeNumb")(e.created_at,"yyyy-MM-dd hh:mm")))])]),t._v(" "),n("div",[n("h4",[e.balance>0?n("span",[t._v("+"+t._s(e.balance))]):t._e(),t._v(" "),e.balance<0?n("span",{staticStyle:{color:"#333"}},[t._v(t._s(e.balance))]):t._e()])])])})),t._v(" "),n("noresult",{directives:[{name:"show",rawName:"v-show",value:0==t.mxlist.length,expression:"mxlist.length == 0"}],attrs:{tipText:"暂无记录"}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.mxlist.length>0&&t.loadshow,expression:"mxlist.length>0 && loadshow"}],staticClass:"loadMore",on:{click:t.loadMoreitem}},[n("button",[t._v("加载更多...")])])],1),t._v(" "),n("mt-popup",{staticClass:"czcontent",attrs:{position:"bottom"},model:{value:t.showchous,callback:function(e){t.showchous=e},expression:"showchous"}},[n("div",{staticClass:"czcontent_c"},[n("h3",[t._v("充值"),n("span",{staticClass:"closes",on:{click:function(e){t.showchous=!1}}},[n("img",{attrs:{src:s("Xbme")}})])]),t._v(" "),n("div",{staticClass:"pay_types"},[n("span",{class:0==t.pptype?"curpay":"",on:{click:function(e){t.pptype=0}}},[t._v("微信充值")]),n("span",{class:1==t.pptype?"curpay":"",on:{click:function(e){t.pptype=1}}},[t._v("充值码充值")])]),t._v(" "),0==t.pptype?n("div",{staticClass:"lqlist"},[n("ul",[t._l(t.lqList,function(e){return n("li",{on:{click:function(s){t.paySelect=e}}},[n("div",{staticClass:"lqitem",class:t.paySelect.id==e.id?"lqitem_cur":""},[n("h3",[t._v(t._s(e.amount)+"元")]),t._v(" "),n("p",[t._v("售价"+t._s(e.price)+"元")])])])}),t._v(" "),n("div",{staticClass:"cl"}),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:t.paySelect.id,expression:"paySelect.id"}],staticClass:"confirm_btn",on:{click:function(e){t.buylingq(t.paySelect)}}},[t._v("确定充值")])],2)]):t._e(),t._v(" "),1==t.pptype?n("div",{staticClass:"jhmcontent"},[n("ul",{staticClass:"jhmul"},[n("li",{staticClass:"libox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.money_czm,expression:"money_czm"}],staticClass:"matext",attrs:{placeholder:"请输入充值码",type:"text"},domProps:{value:t.money_czm},on:{input:function(e){e.target.composing||(t.money_czm=e.target.value)}}})]),t._v(" "),n("li",[n("button",{directives:[{name:"show",rawName:"v-show",value:12!=t.money_czm.trim().length,expression:"money_czm.trim().length!=12"}],staticClass:"dis"},[t._v("充值")]),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:12==t.money_czm.trim().length,expression:"money_czm.trim().length==12"}],on:{click:t.money_cz}},[t._v("充值")])])])]):t._e()])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("img",{attrs:{src:s("VOmM")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{color:"#999"}},[this._v("零钱满100元后即可申请提现"),e("br"),this._v("您还可以使用零钱进行支付")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nbtns nbtns_buy"},[this._v("充值"),e("span",{staticClass:"hui"},[this._v("惠")])])}]};var o=s("VU/8")(a,c,!1,function(t){s("Hv3H")},null,null);e.default=o.exports},Hv3H:function(t,e){},VOmM:function(t,e,s){t.exports=s.p+"static/img/shai.74a8ca0.png"},Xbme:function(t,e,s){t.exports=s.p+"static/img/cancel.e31ab10.png"}});