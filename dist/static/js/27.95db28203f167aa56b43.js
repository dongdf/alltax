webpackJsonp([27],{NeEQ:function(t,e,s){t.exports=s.p+"static/img/filter.18f61c8.png"},X3cT:function(t,e,s){t.exports=s.p+"static/img/cancel.e31ab10.png"},oO3B:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),l=s("MTyd"),n=(s("Au9i"),s("Q0Ca"),s("LBdL")),o=s("5JGS"),c=s("S6xT"),u=s("8GCM"),r={data:function(){return{classType:[],question_list:[],lawsearch:!1,psize:15,pnumb:1,guanzhu:"",classid:"",lawKey:"",fitem1:[{classfyName:"最新",value:"newst"},{classfyName:"推荐",value:"recommend"},{classfyName:"访问量",value:"visit"},{classfyName:"关注量",value:"attention"}],fitem2:[{classfyName:"最新",value:"newst"},{classfyName:"推荐",value:"recommend"},{classfyName:"访问量",value:"visit"},{classfyName:"关注量",value:"attention"}],pickershow:!1,loadshow:!0,lawfilter1:[{name:"不限",value:""},{name:"2018",value:2018},{name:"2017",value:2017},{name:"2016",value:2016}],lawfilter2:[],lawSelect1:{},lawSelect2:{},cats:[],filterContion:null,itemComponents:[],curtime:(new Date).getTime()}},components:{tabbar:l.a,questionList:n.a,knowledgeList:c.a,msearch:u.a},computed:{},methods:{reloadComponent:function(){},resetSearch:function(){this.$router.replace({path:"/law-list",query:{id:127,name:"法规库",law1:"",law2:"",curtime:this.curtime}})},enterSearch:function(){this.$router.push({path:"/search",query:{kw:this.lawKey,classid:127}})},slideBarSearch:function(){this.$router.replace({path:"/law-list",query:{id:127,name:"法规库",law1:i()(this.lawSelect1),law2:i()(this.lawSelect2),curtime:this.curtime}})},lawclick1:function(t){this.lawSelect1=t},lawclick2:function(t){this.lawSelect2=t},getsz:function(){var t=this;this.$http.get("user/commonService/getClassfyTree?classfyType=13&classfyRootId=").then(function(e){t.lawfilter2=e.data,t.lawfilter2.unshift({classfyName:"不限",id:""})})},hotFilter:function(t){this.filterContion=t,2==t?this.itemComponents.push({component:o.a,data:this.fitem1,isshow:!0}):this.itemComponents.push({component:o.a,data:this.fitem2,isshow:!0})},itemOk:function(t){this.itemComponents[0].isshow=!1,this.itemComponents=[],2==this.filterContion?this.guanzhu=t.selectItem.value:(console.log("热度:"+i()(t)),this.guanzhu=t.selectItem.value),this.question_list=[],this.pnumb=1,this.getquestionList()},itemCancle:function(){this.itemComponents[0].isshow=!1,this.itemComponents=[]},goToExperts:function(){this.$router.push({path:"experts",query:this.$route.query})},goToCourse:function(){this.$router.push({path:"course",query:this.$route.query})},gotoDetail:function(){this.$router.push({path:"question-detail",query:this.$route.query})},askQuestion:function(){this.$router.push({path:"ask-question",query:this.$route.query})},getquestionList:function(){var t=this;this.$indicator.open({text:"加载中...",spinnerType:"fading-circle"}),this.$http.post("knowledge/knowledgeService/list",{subData:{pageNum:this.pnumb,pageSize:this.psize,type:this.$route.query.id,sortRule:this.guanzhu,years:this.lawSelect1.value,szId:this.lawSelect2.id}}).then(function(e){if(setTimeout(function(){t.$indicator.close()},200),0==e.data.data.list.length)return t.pnumb>1&&t.$toast("没有了"),t.loadshow=!1,!1;if(t.question_list.length>0){var s=e.data.data.list;for(var a in s)t.question_list.push(s[a])}else t.question_list=e.data.data.list})},loadMoreitem:function(){this.pnumb++,this.getquestionList()},getType1:function(){var t=this;this.$http.get("ask/askService/getQuestionTrade").then(function(e){t.fitem1=e.data.data})}},mounted:function(){127==this.$route.query.id&&(this.guanzhu="publishTime"),document.title=this.$route.query.name,this.$route.query.law1&&(this.lawSelect1=JSON.parse(this.$route.query.law1)),this.$route.query.law2&&(this.lawSelect2=JSON.parse(this.$route.query.law2)),this.getsz(),this.getquestionList(),this.getType1()}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"askchild"}},[a("div",{staticClass:"lawBar"},[a("div",{staticClass:"filterBox"},[a("div",{staticClass:"pos"},[a("msearch",{attrs:{ktype:"knowledge",classid:t.$route.query.id}})],1)]),t._v(" "),a("div",{staticClass:"filterIcons",on:{click:function(e){t.lawsearch=!0}}},[a("img",{attrs:{src:s("NeEQ")}}),t._v("筛选\n\n         ")]),t._v(" "),a("div",{staticClass:"cl"})]),t._v(" "),a("div",{staticClass:"lawitems"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.lawSelect1.value||t.lawSelect2.id,expression:"lawSelect1.value || lawSelect2.id"}],staticClass:"law_condition"},[t._v("筛选条件："),a("span",{directives:[{name:"show",rawName:"v-show",value:t.lawSelect1.value,expression:"lawSelect1.value"}]},[t._v(t._s(t.lawSelect1.name))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.lawSelect2.id,expression:"lawSelect2.id"}]},[t._v(t._s(t.lawSelect2.classfyName))]),t._v(" "),a("p",{staticClass:"clearbtn",on:{click:function(e){t.resetSearch()}}},[t._v("重置")])]),t._v(" "),a("knowledgeList",{attrs:{knowledgeListData:t.question_list}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.question_list.length>0&&t.loadshow,expression:"question_list.length>0 && loadshow"}],staticClass:"loadMore",on:{click:t.loadMoreitem}},[a("button",[t._v("加载更多...")])]),t._v(" "),t._l(t.itemComponents,function(e){return a(e.component,{tag:"div",attrs:{pickerShow:e.isshow,pickerList:e.data},on:{itemok:t.itemOk,itemcancle:t.itemCancle}})}),t._v(" "),a("tabbar",{attrs:{active:1}}),t._v(" "),a("mt-popup",{staticClass:"lawc",attrs:{position:"right",modal:!0},model:{value:t.lawsearch,callback:function(e){t.lawsearch=e},expression:"lawsearch"}},[a("div",{staticClass:"lawc1"},[a("h3",[t._v("筛选条件"),a("span",{on:{click:function(e){t.lawsearch=!1}}},[a("img",{attrs:{src:s("X3cT")}})])]),t._v(" "),a("div",{staticClass:"lawcc"},[a("div",{staticClass:"lawcc2"},[a("h4",[t._v("年度")]),t._v(" "),a("p",t._l(t.lawfilter1,function(e){return a("a",{class:t.lawSelect1.value==e.value?"curs":"",on:{click:function(s){t.lawclick1(e)}}},[a("span",[t._v(t._s(e.name))])])}))]),t._v(" "),a("div",{staticClass:"lawcc2"},[a("h4",[t._v("税种")]),t._v(" "),a("p",t._l(t.lawfilter2,function(e){return a("a",{class:t.lawSelect2.id==e.id?"curs":"",on:{click:function(s){t.lawclick2(e)}}},[a("span",[t._v(t._s(e.classfyName))])])}))]),t._v(" "),a("div",{staticClass:"cl"})]),t._v(" "),a("div",{staticClass:"lawccBottom"},[a("a",{staticClass:"search",on:{click:t.slideBarSearch}},[a("span",[t._v("筛选")])]),t._v(" "),a("a",{on:{click:function(e){t.resetSearch()}}},[a("span",[t._v("重置")])])])])])],2)},staticRenderFns:[]};var m=s("VU/8")(r,h,!1,function(t){s("ooaU")},"data-v-86d85646",null);e.default=m.exports},ooaU:function(t,e){}});