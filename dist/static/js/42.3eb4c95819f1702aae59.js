webpackJsonp([42],{"58Cf":function(t,s){},XfGI:function(t,s){},"w/Zo":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("mvHQ"),a=e.n(i),n=e("MTyd"),o=(e("Au9i"),e("Q0Ca"),e("LBdL")),r=e("5JGS"),c=e("S6xT"),u={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"allSearch"},[i("div",{staticClass:"searchBox",on:{click:t.showsearchbox}},[t._m(0),t._v(" "),i("div",{staticClass:"cl"})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.searchShow,expression:"searchShow"}],staticClass:"ppsearch"},[i("div",{staticClass:"ppsearchBox"},[i("div",{staticClass:"searchBox"},[t._m(1),t._v(" "),i("div",{staticClass:"searchTextBox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.kwords,expression:"kwords"}],ref:"msearchinputbox",attrs:{placeholder:"请输入关键字"},domProps:{value:t.kwords},on:{keyup:function(s){if(!("button"in s)&&t._k(s.keyCode,"enter",13,s.key,"Enter"))return null;t.enterSearch()},input:function(s){s.target.composing||(t.kwords=s.target.value)}}})]),t._v(" "),i("div",{staticClass:"cl"})]),t._v(" "),i("span",{staticClass:"canclebtn",on:{click:function(s){t.enterSearch()}}},[t._v("搜索")])]),t._v(" "),i("div",{staticClass:"ppsearch_rel"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.hisList.length>0,expression:"hisList.length>0"}],staticClass:"hotKey"},[i("h3",[t._v("搜索记录")]),t._v(" "),i("p",t._l(t.hisList,function(s){return i("a",{on:{click:function(e){t.hotSearch(s)}}},[i("span",[t._v(t._s(s.keywords))])])})),i("div",{staticClass:"cl"}),t._v(" "),i("p")]),t._v(" "),i("div",{staticClass:"jiqiren"},[i("img",{attrs:{src:e("HP2R")},on:{click:function(s){t.golijing()}}})]),t._v(" "),i("div",{staticClass:"closeSearch",on:{click:function(s){t.searchShow=!1}}},[i("img",{attrs:{src:e("JNLr")}})])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"searchIcons"},[s("img",{attrs:{src:e("e03G")}}),s("span",[this._v("搜索")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"searchIcons"},[s("img",{attrs:{src:e("e03G")}})])}]};var h=e("VU/8")({name:"msearch",props:["ktype","classid"],data:function(){return{hisList:[],searchShow:!1,kwords:""}},mounted:function(){this.getSearchhis()},methods:{golijing:function(){var t=this;this.$http.get("user/userService/getUserWeChatVo").then(function(s){if(t.mineInfo=s.data.data,!t.mineInfo.mobile)return t.$messagebox.confirm("请先完善用户信息","提示").then(function(s){t.$router.push("/login")}),!1;"obytr1bx52j2wielziducml8jyno"==t.mineInfo.imId?t.$toast("不能和自己聊天"):t.$router.push({path:"/chat",query:{targetAccount:"obytr1bx52j2wielziducml8jyno"}})})},showsearchbox:function(){this.$refs.msearchinputbox.focus(),this.searchShow=!0},getSearchhis:function(){var t=this;this.$http.get("knowledge/statuteService/searchHistoryList").then(function(s){t.hisList=s.data.data})},enterSearch:function(){if(!this.kwords)return this.$toast("请输入关键词"),!1;this.$router.push({path:"/search",query:{kw:this.kwords,ktype:this.ktype,classid:this.classid}})},hotSearch:function(t){this.$router.push({path:"/search",query:{kw:t.keywords,ktype:this.ktype,classid:this.classid}})}}},u,!1,function(t){e("58Cf")},"data-v-706ebd8a",null).exports,l={data:function(){return{classType:[],question_list:[],psize:15,pnumb:1,guanzhu:"",classid:"",fitem1:[{classfyName:"最新",value:"newst"},{classfyName:"推荐",value:"recommend"},{classfyName:"访问量",value:"visit"},{classfyName:"关注量",value:"attention"}],fitem2:[{classfyName:"最新",value:"newst"},{classfyName:"推荐",value:"recommend"},{classfyName:"访问量",value:"visit"},{classfyName:"关注量",value:"attention"}],pickershow:!1,loadshow:!0,cats:[],filterContion:null,itemComponents:[]}},components:{tabbar:n.a,questionList:o.a,knowledgeList:c.a,msearch:h},computed:{},methods:{hotFilter:function(t){this.filterContion=t,2==t?this.itemComponents.push({component:r.a,data:this.fitem1,isshow:!0}):this.itemComponents.push({component:r.a,data:this.fitem2,isshow:!0})},itemOk:function(t){this.itemComponents[0].isshow=!1,this.itemComponents=[],2==this.filterContion?this.guanzhu=t.selectItem.value:(console.log("热度:"+a()(t)),this.guanzhu=t.selectItem.value),this.question_list=[],this.pnumb=1,this.getquestionList()},itemCancle:function(){this.itemComponents[0].isshow=!1,this.itemComponents=[]},goToExperts:function(){this.$router.push({path:"experts",query:this.$route.query})},goToCourse:function(){this.$router.push({path:"course",query:this.$route.query})},gotoDetail:function(){this.$router.push({path:"question-detail",query:this.$route.query})},askQuestion:function(){this.$router.push({path:"ask-question",query:this.$route.query})},getquestionList:function(){var t=this;this.$http.post("knowledge/knowledgeService/list",{subData:{pageNum:this.pnumb,pageSize:this.psize,type:this.$route.query.id,sortRule:this.guanzhu}}).then(function(s){if(0==s.data.data.list.length)return t.pnumb>1&&t.$toast("没有了"),t.loadshow=!1,!1;if(t.question_list.length>0){var e=s.data.data.list;for(var i in e)t.question_list.push(e[i])}else t.question_list=s.data.data.list})},loadMoreitem:function(){this.pnumb++,this.getquestionList()},getType1:function(){var t=this;this.$http.get("ask/askService/getQuestionTrade").then(function(s){t.fitem1=s.data.data})}},mounted:function(){127==this.$route.query.id&&(this.guanzhu="publishTime"),this.getquestionList(),this.getType1()}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"askchild"}},[e("div",{staticClass:"fixedbar"},[e("ul",{staticClass:"box3 clear"},[e("li",{staticClass:"active ar-l"},[t._v(t._s(t.$route.query.name))]),t._v(" "),e("div",{staticClass:"searchIcon"},[e("msearch",{attrs:{ktype:"knowledge",classid:t.$route.query.id}})],1)])]),t._v(" "),e("div",{staticClass:"kitems"},[e("knowledgeList",{attrs:{knowledgeListData:t.question_list}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.question_list.length>0&&t.loadshow,expression:"question_list.length>0 && loadshow"}],staticClass:"loadMore",on:{click:t.loadMoreitem}},[e("button",[t._v("加载更多...")])]),t._v(" "),t._l(t.itemComponents,function(s){return e(s.component,{tag:"div",attrs:{pickerShow:s.isshow,pickerList:s.data},on:{itemok:t.itemOk,itemcancle:t.itemCancle}})}),t._v(" "),e("tabbar",{attrs:{active:1}})],2)},staticRenderFns:[]};var m=e("VU/8")(l,d,!1,function(t){e("XfGI")},"data-v-3ca19387",null);s.default=m.exports}});