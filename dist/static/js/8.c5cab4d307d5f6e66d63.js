webpackJsonp([8],{"4AX1":function(e,t,i){e.exports=i.p+"static/img/yaoqing.9d1656a.png"},"4NIl":function(e,t,i){e.exports=i.p+"static/img/zhev1.85b0dd1.png"},"9S/Q":function(e,t,i){e.exports=i.p+"static/img/icon2.7bdc3bc.png"},E1uR:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("d4Xm"),o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"course-detail"}},[1==e.courseInfo.source?s("div",{staticClass:"courseHead",attrs:{id:"neplayer"}},[s("div",{attrs:{id:"audioContent"}}),e._v(" "),s("div",[s("img",{directives:[{name:"show",rawName:"v-show",value:!e.clicked,expression:"!clicked"}],staticClass:"bigPic",attrs:{src:e.courseInfo.coverUrl,alt:""},on:{click:e.playClick}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:e.audioShow,expression:"audioShow"}],staticClass:"playbtn",attrs:{src:i("RKuF")},on:{click:e.playClick}})])]):e._e(),e._v(" "),2==e.courseInfo.source?s("div",{attrs:{id:"qqvideo"}},[2!=e.courseInfo.source||e.pinfo.videoId?e._e():s("img",{attrs:{src:e.courseInfo.coverUrl}})]):e._e(),e._v(" "),2==e.courseInfo.source&&e.pinfo.videoId?s("video",{attrs:{id:"player-container-id",preload:"auto","x5-playsinline":"",playsinline:"","webkit-playsinline":""}}):e._e(),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowVip.user_type<2,expression:"isShowVip.user_type < 2"}]},[s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.courseInfo.isBuy&&0!=e.courseInfo.curriculumPrice&&0!=e.courseInfo.vipPrice,expression:"courseInfo.isBuy ==0 && courseInfo.curriculumPrice !=0 && courseInfo.vipPrice !=0"}],staticClass:"infosbuy"},[e._v("购买后查看完整视频")])]),e._v(" "),s("div",{staticClass:"box1"},[s("h5",[e._v(e._s(e.courseInfo.curriculumTitle))]),e._v(" "),s("div",{staticClass:"clear"},[s("div",{staticClass:"ar-l"},[0!==e.courseInfo.curriculumPrice?s("span",[e.courseInfo.vipPrice?s("a",{staticStyle:{"text-decoration":"line-through"}},[e._v("市场价：￥"+e._s(e.courseInfo.curriculumPrice.toFixed(2)))]):e._e(),e._v(" "),e.courseInfo.vipPrice?s("label",{staticStyle:{color:"#F60"}},[e._v("会员价：￥"+e._s(e.courseInfo.vipPrice.toFixed(2)))]):e._e()]):s("span",[e._v("免费")])]),e._v(" "),s("div",{staticClass:"ar-r"},[s("span",[s("img",{attrs:{src:i("9S/Q")}}),e._v(e._s(e.courseInfo.attentTotal))]),e._v(" "),s("span",[s("img",{attrs:{src:i("htfk")}}),e._v(e._s(e.courseInfo.playTotal))])])]),e._v(" "),s("div",{staticClass:"hbImgs",on:{click:e.gohbImage}},[s("img",{attrs:{src:i("4AX1")}}),e._v("生成邀请卡,分享给朋友")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.vList.length>0,expression:"vList.length>0"}],staticClass:"video_lisss"},[s("h3",[e._v("课程列表")]),e._v(" "),s("ul",{staticClass:"list"},[e._l(e.vList,function(t){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.zshow,expression:"v.zshow"}],class:e.$route.query.id==t.id?"curr":"",on:{click:function(i){e.playV(t)}}},[e._v(e._s(t.title)+"\n          ")])}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isableZhe,expression:"isableZhe"}],staticClass:"small_more",on:{click:function(t){e.smallzhe()}}},[s("p",{directives:[{name:"show",rawName:"v-show",value:!e.morezhe,expression:"!morezhe"}]},[e._v("展开"),s("img",{attrs:{src:i("4NIl")}})]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.morezhe,expression:"morezhe"}]},[e._v("收起"),s("img",{attrs:{src:i("HOIN")}})])])],2)]),e._v(" "),s("div",{},[s("expertCard",{attrs:{relInfo:e.relInfo,expertInfo:e.experts}}),e._v(" "),s("ul",{staticClass:"box3 clear"},[s("li",{staticClass:"ar-l",class:{active:0==e.active},on:{click:function(t){e.tab(0)}}},[e._v("简介")]),e._v(" "),s("li",{staticClass:"ar-l",class:{active:1==e.active},on:{click:function(t){e.tab(1)}}},[e._v("讨论")]),e._v(" "),s("li",{staticClass:"ar-l",class:{active:2==e.active},on:{click:function(t){e.tab(2)}}},[e._v("评价")])]),e._v(" "),s("div",{staticClass:"tabContent"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.active,expression:"active == 0"}],staticClass:"cards"},[s("div",{staticClass:"AboutCourse"},[s("div",{staticClass:"content"},[s("div",{attrs:{id:"procontent"},domProps:{innerHTML:e._s(e.courseInfo.curriculumIntroduction)}})]),e._v(" "),s("recommends",{attrs:{konwlege:e.konwlege,cuuiculu:e.cuuiculu,goods:e.goods}})],1)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active == 1"}],staticClass:"cards"},[s("comments",{attrs:{commentList:e.discussList,star:!1}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.commentsQesMore,expression:"commentsQesMore"}],staticClass:"loadMore",on:{click:function(t){e.commentsQesLoadmore()}}},[e._v("加载更多")]),e._v(" "),s("reply",{attrs:{type:"1",relId:e.courseId}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2==e.active,expression:"active == 2"}],staticClass:"cards"},[s("comments",{attrs:{commentList:e.commentList,star:!0}}),e._v(" "),s("noresult",{directives:[{name:"show",rawName:"v-show",value:0==e.commentList.length,expression:"commentList.length == 0"}],attrs:{tipText:"暂无记录"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.commentsMore,expression:"commentsMore"}],staticClass:"loadMore",on:{click:function(t){e.commentsLoadmore()}}},[e._v("加载更多")])],1)])],1)]),e._v(" "),s("footer",[s("ul",{staticClass:"foot"},[s("li",{staticClass:"ar-l"}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.courseInfo.curriculumPrice&&e.isShowVip.user_type<2,expression:"courseInfo.curriculumPrice!=0 && isShowVip.user_type < 2"}]},[s("li",{directives:[{name:"show",rawName:"v-show",value:!e.courseInfo.isBuy,expression:"!courseInfo.isBuy"}],staticClass:"ar-r",on:{click:e.wxbuy}},[s("h5",[e._v("立即购买")]),e._v(" "),s("p",[e._v("会员享受更多优惠")])]),e._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:e.courseInfo.isBuy,expression:"courseInfo.isBuy"}],staticClass:"ar-r"},[s("h5",[e._v("已购买")])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.courseInfo.curriculumPrice||2==e.isShowVip.user_type,expression:" courseInfo.curriculumPrice==0 || isShowVip.user_type == 2"}]},[e._m(0)]),e._v(" "),s("li",{staticClass:"ar-m",staticStyle:{"margin-right":"60px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.islike,expression:"islike"}],staticStyle:{"text-align":"center"},on:{click:e.cancelAttent}},[s("img",{attrs:{src:i("LRO0"),alt:""}}),e._v(" "),s("p",[e._v("已关注")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.islike,expression:"!islike"}],staticStyle:{"text-align":"center"},on:{click:e.attent}},[s("img",{attrs:{src:i("diEF"),alt:""}}),e._v(" "),s("p",[e._v("关注")])])])])]),e._v(" "),s("toastOne",{directives:[{name:"show",rawName:"v-show",value:e.videoBuytip,expression:"videoBuytip"}],on:{buy:e.tipsBuys,closebuy:e.tipsBuysClose}}),e._v(" "),e._l(e.paycomm,function(t){return s(t.component,{tag:"div",attrs:{showPay:t.parentShowpay,buyInfo:t.buyInfo},on:{close:e.payClose}})}),e._v(" "),s("submitStar",{attrs:{starShow:e.startShow}}),e._v(" "),s("mt-popup",{staticClass:"mint-popup-3",attrs:{modal:!0,position:"bottom"},model:{value:e.chooseCourse,callback:function(t){e.chooseCourse=t},expression:"chooseCourse"}},[s("div",{staticClass:"choosekc"},[s("h3",[e._v("购买课程\n        "),s("span",{on:{click:function(t){e.closebuy()}}},[s("img",{attrs:{src:i("3lAA")}})]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.huiMoney>0,expression:"huiMoney>0"}],staticClass:"tips"},[e._v("打包购买省￥"+e._s(e.huiMoney.toFixed(2))+",更优惠")])]),e._v(" "),s("div",{staticClass:"chooseContent"},[s("ul",[e._l(e.vList,function(t){return[s("li",{directives:[{name:"show",rawName:"v-show",value:!t.isshow,expression:"!v.isshow"}],staticStyle:{color:"#999"}},[s("span",{staticStyle:{"padding-left":"0px"}},[e._v(e._s(t.title))]),e._v(" "),s("p",{staticStyle:{"padding-left":"0"}},[t.vipPrice?s("b",{staticClass:"fl",staticStyle:{color:"#999"}},[e._v("￥"+e._s(t.vipPrice.toFixed(2)))]):e._e()]),s("div",{staticClass:"cl"}),e._v(" "),s("p")]),e._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"v.isshow"}],staticStyle:{color:"#333",background:"#F8F8F8"}},[s("span",[e._v(e._s(t.title))]),e._v(" "),s("p",{staticStyle:{"padding-left":"0"}},[t.vipPrice?s("b",{staticClass:"fl"},[e._v("￥"+e._s(t.vipPrice.toFixed(2)))]):e._e(),e._v(" "),s("span",{staticClass:"fr"})]),s("div",{staticClass:"cl"}),e._v(" "),s("p")])]})],2)]),e._v(" "),s("div",{staticClass:"buyBottom"},[s("ul",[s("li",{on:{click:function(t){e.wxgoumais(1)}}},[s("span",[s("img",{attrs:{src:i("qVh5")}})]),e._v("\n            单独购买\n            "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.chooseMoney>0,expression:"chooseMoney>0"}],staticClass:"dangoujia"},[e._v("￥"+e._s(e.chooseMoney.toFixed(2)))])]),e._v(" "),s("li",{staticClass:"buyall",on:{click:function(t){e.wxgoumais(2)}}},[s("span",[s("img",{attrs:{src:i("MDE0")}})]),e._v("\n            打包购买\n            "),s("p",{staticClass:"dangoujia"},[e._v("￥"+e._s(e.totalMoney.toFixed(2)))])])])])])])],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticClass:"ar-r"},[t("h5",[this._v("免费")])])}]};var a=function(e){i("rHRO")},r=i("VU/8")(s.a,o,!1,a,"data-v-0558f08e",null);t.default=r.exports},HOIN:function(e,t,i){e.exports=i.p+"static/img/zhev2.1130c38.png"},LRO0:function(e,t,i){e.exports=i.p+"static/img/heart.5a9ff57.png"},MDE0:function(e,t,i){e.exports=i.p+"static/img/buyall.7fbeb51.png"},d4Xm:function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__=__webpack_require__("//Fk"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__),__WEBPACK_IMPORTED_MODULE_2__components_pay__=__webpack_require__("mTUd"),__WEBPACK_IMPORTED_MODULE_3__components_toastOne__=__webpack_require__("lgrl"),__WEBPACK_IMPORTED_MODULE_4__components_expertCard__=__webpack_require__("j+K+"),__WEBPACK_IMPORTED_MODULE_5__components_recommends__=__webpack_require__("k1Tv"),__WEBPACK_IMPORTED_MODULE_6__components_sendComments__=__webpack_require__("XTYa"),__WEBPACK_IMPORTED_MODULE_7__components_comments__=__webpack_require__("6rV5"),__WEBPACK_IMPORTED_MODULE_8__components_reply__=__webpack_require__("Wkgs"),__WEBPACK_IMPORTED_MODULE_9__components_submitStar__=__webpack_require__("k26J"),__WEBPACK_IMPORTED_MODULE_10__coupon__=__webpack_require__("B4FG"),__WEBPACK_IMPORTED_MODULE_11__components_experts__=__webpack_require__("CB57"),__WEBPACK_IMPORTED_MODULE_12__components_noresult__=__webpack_require__("oPJ/");__webpack_exports__.a={data:function(){return{pinfo:{},spic:!1,isableZhe:!0,morezhe:!1,totalMoney:0,chooseMoney:0,chooseCourse:!1,huiMoney:100,agenweb:null,touchnumb:0,paycomm:[],audioPlay:null,isBuy:!1,startShow:!1,active:0,videoBuytip:!1,courseInfo:"",clicked:!1,videoSrc:"",commentList:{},discussList:{},expertId:"",videoId:"",expertInfo:{},attented:!0,islike:!0,audioShow:!0,payShow:!1,selectQquan:!1,konwlege:[],cuuiculu:[],goods:[],courseId:"",experts:[],commentPnumb:1,commentPsize:15,commentsMore:!0,commentQesPnumb:1,commentQesPsize:15,commentsQesMore:!0,vList:[],selectVideo:{id:""},playVideo:null,isShowVip:!1,isVip:null,hisPlay:null,siglVideoUrl:"",mineInfo:{},pytpe:!1,buyInfo:{buyTitle:"订单金额",isCoupon:!0,type:"3",info:{money:"11980"},wxPay:!0,memberPay:!0},parentShowpay:!1,relInfo:{name:"课程",title:"122"},aliplayer:null,qqplayer:null}},filters:{},components:{noresult:__WEBPACK_IMPORTED_MODULE_12__components_noresult__.a,submitStar:__WEBPACK_IMPORTED_MODULE_9__components_submitStar__.a,toastOne:__WEBPACK_IMPORTED_MODULE_3__components_toastOne__.a,comments:__WEBPACK_IMPORTED_MODULE_7__components_comments__.a,SendComments:__WEBPACK_IMPORTED_MODULE_6__components_sendComments__.a,recommends:__WEBPACK_IMPORTED_MODULE_5__components_recommends__.a,reply:__WEBPACK_IMPORTED_MODULE_8__components_reply__.a,expertCard:__WEBPACK_IMPORTED_MODULE_4__components_expertCard__.a,Coupu:__WEBPACK_IMPORTED_MODULE_10__coupon__.a,experts:__WEBPACK_IMPORTED_MODULE_11__components_experts__.a},computed:{},methods:{gohbImage:function(){this.$router.push({path:"commcoursepic",query:{id:this.courseId}})},creatQQ:function(){return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function(e,t){$.getScript("//imgcache.qq.com/open/qcloud/video/tcplayer/tcplayer.min.js",function(){e()})})},qqPlay:function(){var e=this,t=this;this.$http.post("curriculum/curriculumService/getPlayQqAuth",{subData:this.$route.query.id}).then(function(i){if(1==i.data.code){if(e.pinfo=i.data.data,!i.data.data.videoId)return e.$toast("该课程无法试看，请购买后观看"),!1;var s={controls:!0,autoplay:!1,fileID:i.data.data.videoId,appID:i.data.data.appid,t:i.data.data.t,us:i.data.data.us,sign:i.data.data.sign,plugins:{ContinuePlay:{auto:!0,text:"上次播放至 ",btnText:"恢复播放"}}};i.data.data.exper&&(s.exper=i.data.data.exper),t.creatQQ().then(function(e){t.qqplayer=TCPlayer("player-container-id",s),t.qqplayer.on("ended",function(){t.listenVideoEnd(),console.log("播放完毕")}),t.qqplayer.on("play",function(){t.addrealPlay(),console.log("播放完毕")})})}else e.$toast(i.data.msg)})},addrealPlay:function(){if(sessionStorage.getItem("courseid")==this.$route.query.id)return!1;sessionStorage.setItem("courseid",this.$route.query.id),this.$http.post("curriculum/curriculumService/addPlayRecord?videoId="+this.$route.query.id)},aliPlay:function(){var e=this,t=this;this.$http.post("curriculum/curriculumService/getPlayQqAuth",{subData:this.$route.query.id}).then(function(i){1==i.data.code?(t.aliplayer=new Aliplayer({id:"J_prismPlayer",width:"100%",vid:i.data.data.videoId,playauth:i.data.data.playAuthCode,playsinline:!0,cover:t.courseInfo.coverUrl,autoplay:!1,preload:!1,x5_type:"h5",language:"zh-cn"},function(e){console.log("播放器创建好了。"),t.spic=!0}),t.aliplayer.on("ended",function(){t.listenVideoEnd(),console.log("播放完毕")}),e.aliplayer.tag.addEventListener("x5videoexitfullscreen",function(){WeixinJSBridge})):t.$toast(i.data.msg)})},aliPlayXin:function(){var e=this,t=this;this.getmyinfo().then(function(i){if(!i.mobile)return e.$messagebox.confirm("请先完善用户信息","提示",{confirmButtonText:"确定"}).then(function(t){e.$router.push("/login")}),!1;e.$http.post("curriculum/curriculumService/play",{subData:{videoId:e.courseInfo.id}}).then(function(i){if(1==i.data.code){if(!i.data.data.curriculumUrl)return e.$toast("该课程无法试看，请购买后观看"),!1;t.aliplayer=new Aliplayer({id:"J_prismPlayer",width:"100%",controlBarVisibility:"always",source:i.data.data.curriculumUrl,playsinline:!0,cover:t.courseInfo.coverUrl,autoplay:!1,preload:!1,x5_type:"h5",language:"zh-cn"},function(e){console.log("播放器创建好了。"),t.spic=!0}),t.aliplayer.on("ended",function(){t.listenVideoEnd(),console.log("播放完毕")});var s=i.data.data.curriculumUrl;".mp3"==s.substr(s.lastIndexOf(".")).toLowerCase()&&(t.pytpe=!0)}else e.$toast(i.data.msg),e.clicked=!1})})},smallzhe:function(){var e=this;if(this.morezhe){var t=this.vList.findIndex(function(t){return t.id==e.courseId});for(var i in++t<3&&(t=3),this.vList)this.vList[i].zshow=i<t}else for(var i in this.vList)this.$set(this.vList[i],"zshow",!0);this.morezhe=!this.morezhe},wxgoumais:function(e){var t;this.chooseCourse=!1,1==e&&(t={buyTitle:"订单金额",isCoupon:!0,type:"3",info:{money:1==this.isShowVip.user_type?this.courseInfo.vipPrice:this.courseInfo.curriculumPrice,resourceId:this.courseId},wxPay:!0,memberPay:!1}),2==e&&(t={buyTitle:"订单金额",isCoupon:!0,type:"3",info:{money:1==this.isShowVip.user_type?this.courseInfo.pVipPrice:this.courseInfo.pPrice,resourceId:this.courseInfo.pid},wxPay:!0,memberPay:!1}),this.paycomm=[],this.paycomm.push({component:__WEBPACK_IMPORTED_MODULE_2__components_pay__.a,parentShowpay:!0,buyInfo:t})},closebuy:function(){this.chooseCourse=!1},youhuiMoney:function(){var e=0;for(var t in this.vList)e+=this.vList[t].vipPrice;for(var t in this.huiMoney=e-this.totalMoney,this.chooseMoney=0,this.vList)this.vList[t].bcked&&(this.chooseMoney+=this.vList[t].vipPrice)},buyck:function(e){var t=this.vList.findIndex(function(t){return e.id==t.id});e.bcked?this.$set(this.vList[t],"bcked",!1):this.$set(this.vList[t],"bcked",!0)},toPayinfo:function(){this.buyInfo={buyTitle:"订单金额",isCoupon:!0,type:"3",info:{money:1==this.isShowVip.user_type?this.courseInfo.vipPrice:this.courseInfo.curriculumPrice,resourceId:this.courseId},wxPay:!0,memberPay:!1}},tipsBuys:function(){this.videoBuytip=!1,this.toPayinfo(),this.parentShowpay=!0,this.wxbuy()},tipsBuysClose:function(){this.videoBuytip=!1},payClose:function(){this.paycomm[0].parentShowpay=!1,this.paycomm=[]},wxbuy:function(){var e=this;this.$http.get("user/userService/getUserWeChatVo").then(function(t){if(!t.data.data.mobile)return e.$messagebox.confirm("请先完善用户信息","提示",{confirmButtonText:"确定"}).then(function(t){e.$router.push("/login")}),!1;e.courseInfo.pid?(e.chooseCourse=!0,e.youhuiMoney()):(e.toPayinfo(),e.paycomm.push({component:__WEBPACK_IMPORTED_MODULE_2__components_pay__.a,parentShowpay:!0,buyInfo:e.buyInfo}))})},tab:function(e){1==e&&(this.discussList=[],this.commentQesPnumb=1,this.commentsMore=!0,this.getcommentsQuestion()),2==e&&(this.commentList=[],this.commentPnumb=1,this.commentsQesMore=!0,this.getcomments()),this.active=e},createVideo:function(){var e=document.body.clientWidth,t=document.getElementById("neplayer");t.innerHTML="",t.innerHTML='<video id="my-video" x5-playsinline  playsinline="" webkit-playsinline="" class="" controls  width="'+e+"\"   data-setup='{}'></video>",this.playVideo=document.getElementById("my-video")},creatAudio:function(){var e=document.getElementById("audioContent"),t=document.createElement("AUDIO");t.setAttribute("id","my-audio"),t.setAttribute("controls","controls"),t.setAttribute("controlsList","nodownload"),t.style.width="100%",this.audioPlay||e.appendChild(t),this.audioShow=!1,this.audioPlay=document.getElementById("my-audio")},listenVideoEnd:function(){var e=this;1==this.courseInfo.source?this.playVideo.addEventListener("ended",function(){!e.isBuy&&e.courseInfo.vipPrice&&(e.videoBuytip=!0)}):!e.isBuy&&e.courseInfo.vipPrice&&(e.videoBuytip=!0)},listenAudioEnd:function(){var e=this;this.audioPlay.addEventListener("ended",function(){!e.isBuy&&e.courseInfo.vipPrice&&(e.videoBuytip=!0)})},getmyinfo:function(){var e=this;return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function(t,i){e.$http.get("user/userService/getUserWeChatVo").then(function(e){t(e.data.data)})})},mostart:function(){this.playClick(),this.touchnumb++},moend:function(){var e=this,t=this;setTimeout(function(){e.playVideo?(t.playVideo.play(),t.listenVideoEnd()):t.audioPlay.play()},1e3),this.touchnumb++},moliststart:function(e){this.playV(e)},molistend:function(e){var t=this;setTimeout(function(){t.playVideo?(t.playVideo.play(),t.listenVideoEnd()):t.audioPlay.play()},1e3)},newplay:function(){},playClick:function playClick(){var _this8=this,that=this;this.getmyinfo().then(function(data){if(!data.mobile)return _this8.$messagebox.confirm("请先完善用户信息","提示",{confirmButtonText:"确定"}).then(function(e){_this8.$router.push("/login")}),!1;_this8.$http.post("curriculum/curriculumService/play",{subData:{videoId:_this8.courseInfo.id}}).then(function(res){if(1==res.data.code){if(!res.data.data.curriculumUrl)return _this8.$toast("该课程无法试看，请购买后观看"),!1;var obj=res.data.data.curriculumUrl,suffix=obj.substr(obj.lastIndexOf(".")).toLowerCase();if(".mp3"==suffix)_this8.creatAudio(),_this8.audioPlay.src=res.data.data.curriculumUrl,_this8.audioPlay.play(),_this8.listenAudioEnd();else{if(_this8.clicked=!0,_this8.createVideo(),_this8.courseInfo.isSerial?res.data.data.isBuy?(_this8.selectVideo=that.vList[0],_this8.playVideo.src=res.data.data.curriculumUrl):(_this8.selectVideo={},_this8.siglVideoUrl=res.data.data.curriculumUrl,_this8.playVideo.src=res.data.data.curriculumUrl):_this8.playVideo.src=res.data.data.curriculumUrl,localStorage.getItem("play")){var localPlay=eval("("+localStorage.getItem("play")+")"),idx=localPlay.findIndex(function(e){return e.courseId==that.courseInfo.id});idx>=0&&(_this8.playVideo.currentTime=localPlay[idx].currentPlay)}_this8.playVideo.addEventListener("play",function(){that.addrealPlay()}),_this8.listenVideoEnd()}}else _this8.$toast(res.data.msg),_this8.clicked=!1})})},playV:function(e){return this.$router.replace({path:"/course-detail",query:{id:e.id}}),!1},attent:function(){var e=this;this.$http.post("curriculum/curriculumService/attent/add",{subData:{videoId:this.courseId}}).then(function(t){1==t.data.code&&(e.islike=!0,e.courseInfo.attentTotal++),console.log(t.data)})},cancelAttent:function(){var e=this;this.$http.post("curriculum/curriculumService/attent/delete",{subData:{videoId:this.courseId}}).then(function(t){if(e.islike=!1,0==e.courseInfo.attentTotal)return!1;e.courseInfo.attentTotal--})},getkonwlege:function(){var e=this;this.$http.post("curriculum/curriculumService/relKnowledge",{subData:{resourceId:this.courseId,pageSize:5,pageNum:1}}).then(function(t){e.konwlege=t.data.data.list})},getcuuiculu:function(){var e=this;this.$http.post("curriculum/curriculumService/relExpert",{subData:{resourceId:this.courseId,pageSize:5,pageNum:1}}).then(function(t){e.cuuiculu=t.data.data.list})},getgoods:function(){var e=this;this.$http.post("curriculum/curriculumService/relGoods",{subData:{resourceId:this.courseId,pageSize:5,pageNum:1}}).then(function(t){e.goods=t.data.data.list})},getcoursedetail:function(){var e=this;this.$http.post("curriculum/curriculumService/detail",{subData:{videoId:this.courseId}}).then(function(t){if(1!=t.data.code&&e.$router.replace({path:"/noresource"}),142==t.data.data.classfyId&&e.$router.replace({path:"scourse-detail",query:{id:e.courseId}}),1==t.data.code){if(e.courseInfo=t.data.data,e.courseInfo.pid?e.totalMoney=t.data.data.pVipPrice:e.totalMoney=t.data.data.vipPrice,e.relInfo.id=e.courseId,e.relInfo.title=e.courseInfo.curriculumTitle,e.isBuy=e.courseInfo.isBuy,e.videoId=parseFloat(e.courseInfo.id),e.courseInfo.isSerial||e.courseInfo.pid){var i=e.courseInfo.isSerial?e.courseId:e.courseInfo.pid;e.getVideoList(i)}1==e.courseInfo.source?e.playClick():e.qqPlay(),e.courseInfo.isPreview&&(e.isShowVip=!0),e.expertId=parseFloat(e.courseInfo.expertId),e.courseInfo.like?e.islike=!0:e.islike=!1,e.getcurrentPlay();var s={type:1,title:e.courseInfo.curriculumTitle,desc:"财合税专家咨询平台",link:"/#/course-detail?id="+e.courseId,imgUrl:e.courseInfo.coverUrl?e.courseInfo.coverUrl:"https://chs-picture.oss-cn-beijing.aliyuncs.com/chs-hb/logo.jpg"},o={type:1,title:e.courseInfo.curriculumTitle,desc:"财合税专家咨询平台",link:"/#/course-detail?id="+e.courseId,imgUrl:e.courseInfo.coverUrl?e.courseInfo.coverUrl:"https://chs-picture.oss-cn-beijing.aliyuncs.com/chs-hb/logo.jpg"};e.$parent.shareTimePage(o),e.$parent.shareAppPage(s)}else console.log(t.data.msg)})},getexperts:function(){var e=this;this.$http.post("curriculum/curriculumService/relExpert",{subData:{resourceId:this.courseId,pageSize:5,pageNum:1}}).then(function(t){e.experts=t.data.data.list})},getcomments:function(){var e=this,t=this;this.$http.post("curriculum/curriculumService/criticism/list",{subData:{pageNum:this.commentPnumb,pageSize:this.commentPsize,videoId:this.courseId}}).then(function(i){if(0==i.data.data.list.length)return e.pnumb>1&&e.$toast("没有了"),e.commentsMore=!1,!1;if(e.commentList.length>0){var s=i.data.data.list;for(var o in s)t.commentList.push(s[o])}else e.commentList=i.data.data.list})},commentsLoadmore:function(){this.commentPnumb++,this.getcomments()},addcomments:function(){this.$http.post("curriculum/curriculumService/chat/add",{subData:{videoId:this.courseId,content:"wwwwwwwwwwwwwwwww"}}).then(function(e){e.data.code,console.log(e.data)})},commentsQesLoadmore:function(){this.commentQesPnumb++,this.getcommentsQuestion()},getcommentsQuestion:function(){var e=this,t=this;this.$http.post("curriculum/curriculumService/chat/list",{subData:{pageNum:this.commentQesPnumb,pageSize:this.commentQesPsize,videoId:this.courseId}}).then(function(i){if(0==i.data.data.list.length)return e.pnumb>1&&e.$toast("没有了"),e.commentsQesMore=!1,!1;if(e.discussList.length>0){var s=i.data.data.list;for(var o in s)t.discussList.push(s[o])}else e.discussList=i.data.data.list})},getVideoList:function(e){var t=this,i=this;this.$http.post("curriculum/curriculumService/curriculumSerial",{subData:{videoId:e}}).then(function(e){t.vList=e.data.data;var s=t.vList.findIndex(function(e){return e.id==i.courseId});for(var o in++s<3&&(s=3),t.vList.length==s&&(t.isableZhe=!1),t.vList)t.vList[o].id==t.courseId?(t.$set(t.vList[o],"isshow",!0),t.$set(t.vList[o],"bcked",!0)):t.$set(t.vList[o],"isshow",!1),o<s?t.$set(t.vList[o],"zshow",!0):t.$set(t.vList[o],"zshow",!1)})},getisVip:function(){var e=this;this.$http.get("user/userService/getUserWeChatVo").then(function(t){e.isShowVip=t.data.data})},getisBuy:function(){},getcurrentPlay:function getcurrentPlay(){var _this20=this,tarray=localStorage.getItem("play")?eval("("+localStorage.getItem("play")+")"):[],idx=tarray.findIndex(function(e){return e.courseId==_this20.courseId});idx>=0&&(this.hisPlay=tarray[idx],console.log(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.hisPlay)))}},destroyed:function destroyed(){if(this.qqplayer&&(this.qqplayer=null),this.playVideo){var tarray=localStorage.getItem("play")?eval("("+localStorage.getItem("play")+")"):[],cur=void 0;cur={courseId:this.courseId,currseInfo:"",currentPlay:this.playVideo.currentTime.toFixed(1)};var idx=tarray.findIndex(function(e){return e.courseId==cur.courseId});if(idx<0)tarray.push(cur);else for(var i in tarray)cur.courseId==tarray[i].courseId&&(tarray[i]=cur);localStorage.setItem("play",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(tarray)),this.playVideo=null,this.audioPlay=null}},mounted:function(){this.agenweb=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent),this.courseId=this.$route.query.id,this.getcoursedetail(),this.getexperts(),this.getgoods(),this.getkonwlege(),this.getisVip(),this.getisBuy()}}}).call(__webpack_exports__,__webpack_require__("7t+N"))},diEF:function(e,t,i){e.exports=i.p+"static/img/heart1.b064a54.png"},htfk:function(e,t,i){e.exports=i.p+"static/img/icon4.7d5076c.png"},qVh5:function(e,t,i){e.exports=i.p+"static/img/danbuy.9fa84e7.png"},rHRO:function(e,t){}});